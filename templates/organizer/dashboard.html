{% extends 'base.html' %}

{% block title %}Organizer Dashboard{% endblock %}

{% block content %}
<div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-4" data-aos="fade-down">
    <div>
        <h1 class="text-3xl font-bold text-white">My Events</h1>
        <p class="text-gray-400">Manage your events and photographers</p>
    </div>
    <a href="{{ url_for('create_event') }}" class="px-6 py-3 rounded-xl bg-white text-slate-900 font-bold hover:bg-gray-100 transition shadow-[0_0_20px_rgba(255,255,255,0.2)] flex items-center">
        <i class="fas fa-plus mr-2 text-indigo-600"></i>Create Event
    </a>
</div>

{% if events %}
<div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for event in events %}
    <div class="glass rounded-3xl overflow-hidden hover:-translate-y-2 transition-transform duration-300 border border-white/5" data-aos="fade-up">
        <div class="h-32 bg-gradient-to-r from-slate-800 to-slate-900 relative flex items-center justify-center">
            {% if event.poster_filename %}
                <img src="{{ url_for('static', filename='uploads/posters/' ~ event.poster_filename) }}" class="w-full h-full object-cover opacity-60">
            {% else %}
                <i class="fas fa-calendar-alt text-4xl text-white/10"></i>
            {% endif %}
            <div class="absolute top-4 right-4">
                <span class="px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide backdrop-blur-md
                    {% if event.status == 'approved' %}bg-green-500/20 text-green-300 border border-green-500/30
                    {% elif event.status == 'pending' %}bg-yellow-500/20 text-yellow-300 border border-yellow-500/30
                    {% else %}bg-red-500/20 text-red-300 border border-red-500/30{% endif %}">
                    {{ event.status }}
                </span>
            </div>
        </div>

        <div class="p-6">
            <h3 class="text-xl font-bold text-white mb-2 truncate">{{ event.name }}</h3>
            <div class="flex flex-col gap-2 mb-6 text-sm text-gray-400">
                <span class="flex items-center"><i class="fas fa-map-marker-alt w-5 text-indigo-400"></i> {{ event.venue }}</span>
                <span class="flex items-center"><i class="far fa-calendar w-5 text-indigo-400"></i> {{ event.event_date.strftime('%B %d, %Y') }}</span>
                <span class="flex items-center"><i class="far fa-image w-5 text-indigo-400"></i> {{ event.photos|length }} Photos</span>
            </div>
            
            {% if event.event_type == 'private' %}
            <div class="p-3 rounded-lg bg-indigo-500/10 border border-indigo-500/20 mb-6 flex justify-between items-center">
                <span class="text-xs text-indigo-300 uppercase font-bold">Access Code</span>
                <span class="font-mono font-bold text-white tracking-wider">{{ event.access_code }}</span>
            </div>
            {% endif %}
            
            <a href="{{ url_for('manage_event', event_id=event.id) }}" class="block w-full py-3 text-center rounded-xl bg-white/5 text-white font-semibold hover:bg-white/10 border border-white/10 transition">
                Manage Event
            </a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="glass rounded-3xl p-16 text-center border border-dashed border-white/10">
    <div class="w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6">
        <i class="fas fa-calendar-plus text-4xl text-gray-500"></i>
    </div>
    <h3 class="text-xl font-bold text-white mb-2">No events created</h3>
    <p class="text-gray-400 mb-6">Get started by creating your first event.</p>
    <a href="{{ url_for('create_event') }}" class="inline-block px-8 py-3 rounded-xl bg-indigo-600 text-white font-bold hover:bg-indigo-500 transition">
        Create Event
    </a>
</div>
{% endif %}
{% endblock %}